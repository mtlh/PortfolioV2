---
import { Image } from 'astro:assets';
import type ImageMetadata from 'astro:assets';

// Local skill icon imports
import html5 from '~/assets/skills/icons/html5-original.svg';
import css3 from '~/assets/skills/icons/css3-original.svg';
import jsIcon from '~/assets/skills/icons/javascript-plain.svg';
import tsIcon from '~/assets/skills/icons/typescript-original.svg';
import reactIcon from '~/assets/skills/icons/react-original.svg';
import tailwind from '~/assets/skills/icons/tailwindcss-original.svg';
import bootstrap from '~/assets/skills/icons/bootstrap-original.svg';
import materialui from '~/assets/skills/icons/materialui-original.svg';
import astroLight from '~/assets/skills/icons/astro-light.svg';
import astroDark from '~/assets/skills/icons/astro-dark.svg';
import sassIcon from '~/assets/skills/icons/sass-original.svg';

import mysql from '~/assets/skills/icons/mysql-original.svg';
import pythonIcon from '~/assets/skills/icons/python-original.svg';
import nodejs from '~/assets/skills/icons/nodejs-original.svg';
import javaIcon from '~/assets/skills/icons/java-original.svg';
import scalaIcon from '~/assets/skills/icons/scala-original.svg';
import prismaLight from '~/assets/skills/icons/prisma-light.svg';
import prismaDark from '~/assets/skills/icons/prisma-dark.svg';
import firebaseIcon from '~/assets/skills/icons/firebase-plain.svg';
import nextjs from '~/assets/skills/icons/nextjs-original.svg';
import csharpIcon from '~/assets/skills/icons/csharp-original.svg';
import dotnetIcon from '~/assets/skills/icons/dotnetcore-original.svg';

import gitIcon from '~/assets/skills/icons/git-original.svg';
import markdownIcon from '~/assets/skills/icons/markdown-plain.svg';
import npmIcon from '~/assets/skills/icons/npm-original-wordmark.svg';
import webpackIcon from '~/assets/skills/icons/webpack-original.svg';
import vscodeIcon from '~/assets/skills/icons/vscode-original.svg';
import visualstudioIcon from '~/assets/skills/icons/visualstudio-plain.svg';
import canvaIcon from '~/assets/skills/icons/canva-original.svg';
import nugetIcon from '~/assets/skills/icons/nuget-original.svg';

type Skill = {
  src?: ImageMetadata;
  label: string;
  dual?: boolean;
  srcLight?: ImageMetadata;
  srcDark?: ImageMetadata;
};

// Centralised skill data for easy editing
const frontend: Skill[] = [
  { src: html5, label: 'HTML'},
  { src: css3, label: 'CSS'},
  { src: jsIcon, label: 'JavaScript'},
  { src: tsIcon, label: 'TypeScript'},
  { src: reactIcon, label: 'React'},
  { src: tailwind, label: 'Tailwind'},
  { src: bootstrap, label: 'Bootstrap'},
  { src: materialui, label: 'MaterialUI'},
  { dual: true, srcLight: astroLight, srcDark: astroDark, label: 'Astro' },
  { src: sassIcon, label: 'SASS'},
];

const backend: Skill[] = [
  { src: mysql, label: 'mySQL'},
  { src: pythonIcon, label: 'Python'},
  { src: nodejs, label: 'NodeJS'},
  { src: javaIcon, label: 'Java'},
  { src: scalaIcon, label: 'Scala'},
  { dual: true, srcLight: prismaLight, srcDark: prismaDark, label: 'Prisma' },
  { src: firebaseIcon, label: 'Firebase'},
  { src: nextjs, label: 'Nextjs'},
  { src: csharpIcon, label: 'C#'},
  { src: dotnetIcon, label: '.NET'},
];

const tools: Skill[] = [
  { src: gitIcon, label: 'Git'},
  { src: markdownIcon, label: 'Markdown'},
  { src: npmIcon, label: 'NPM'},
  { src: webpackIcon, label: 'Webpack'},
  { src: vscodeIcon, label: 'VS Code'},
  { src: visualstudioIcon, label: 'Visual Studio'},
  { src: canvaIcon, label: 'Canva'},
  { src: nugetIcon, label: 'Nuget'},
];
---

<section class="relative" id="skills" class="">
  <div class="absolute inset-0 bg-light pointer-events-none mb-32" aria-hidden="true"></div>
  <div class="relative max-w-6xl mx-auto px-4 sm:px-6">
    <div class="py-4 pt-8 sm:py-6 lg:py-8 lg:pt-10">
      <div class="mb-8 text-center">
        <p class="text-base text-primary dark:text-primary font-semibold tracking-wide uppercase">Skills</p>
        <h2 class="text-4xl md:text-5xl font-bold leading-tighter tracking-tighter mb-4 font-heading">What I Know</h2>
        <p class="max-w-3xl mx-auto text-center text-xl text-gray-600 dark:text-slate-400">
          From frontend to backend and additional tools. Below is a selection of the technologies I regularly work with.
        </p>
      </div>
      <div class="relative mb-0 m-auto max-w-6xl">
        <a href="https://github.com/mtlh" target="_blank" class="cursor-pointer">
          <Image
            loading="lazy"
            class="mx-auto rounded-md w-full"
            src="https://ghchart.rshah.org/mtlh"
            alt="Matthew Harvey Github chart"
            width={900}
            height={120}
          />
        </a>
      </div>
      <div class="grid items-stretch gap-6 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-3 my-12 dark:text-white">
        {
          [
            { title: 'Frontend', items: frontend },
            { title: 'Backend', items: backend },
            { title: 'Tools', items: tools },
          ].map((section) => (
            <div class="relative flex h-full flex-col p-6 bg-white dark:bg-slate-900 rounded shadow-xl hover:shadow-lg transition dark:border dark:border-slate-800 intersect-once intersect-quarter motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade">
              <div class="flex items-center mb-4">
                <div class="text-2xl font-bold">{section.title}</div>
              </div>
              <div class="grid max-w-none sm:grid-cols-4 grid-cols-5 sm:flex-row sm:justify-center gap-4">
                {section.items.map((skill) => (
                  <div class="group cursor-pointer relative inline-block text-center">
                    {skill.dual && skill.srcLight && skill.srcDark ? (
                      <>
                        <Image
                          src={skill.srcLight}
                          alt={`${skill.label} Light`}
                          class="max-h-12 block w-4/5 dark:hidden"
                          width={100}
                          height={100}
                          loading="lazy"
                        />
                        <Image
                          src={skill.srcDark}
                          alt={`${skill.label} Dark`}
                          class="max-h-12 w-4/5 hidden dark:block"
                          width={100}
                          height={100}
                          loading="lazy"
                        />
                      </>
                    ) : skill.src ? (
                      <Image
                        loading="lazy"
                        class="md:w-12 md:h-12 w-16 h-16"
                        src={skill.src}
                        alt={skill.label}
                        width={100}
                        height={100}
                      />
                    ) : null}
                    <div class="absolute bottom-0 flex-col items-center hidden mb-6 group-hover:flex">
                      <span class="relative z-10 p-3 text-xs leading-none rounded-lg text-white whitespace-no-wrap bg-gradient-to-r from-blue-500 to-blue-600 shadow-lg">
                        {skill.label}
                      </span>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>
